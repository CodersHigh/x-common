[SGF](https://en.wikipedia.org/wiki/Smart_Game_Format)는 보드게임, 특히 바둑과 같은 게임의 파일을 저장하는 데 사용하는 표준 형식입니다.

SGF는 꽤 간단한 형식입니다. SGF 파일은 일반적으로 하나의 나무형 망을 가지고 있고, 나무 안의 각 마디는 하나의 속성목록이 됩니다. 속성목록은 key, value 한 쌍의 정보를 가지고 있고, 각각의 key는 한 번만 발생되지만 여러 개의 value를 가질 수도 있습니다. 

SGF 파일은 다음과 같은 형태를 가지고 있습니다:

```
(;FF[4]C[root]SZ[19];B[aa];W[ab])
```

이것은 세 개의 마디를 가진 나무형 망입니다:

- 가장 상위 단계의 마디는 두 개의 속성을 가지고 있습니다: FF\[4\] (key = "FF", value =
  "4")와 C\[root\](key = "C", value = "root"). (FF는 SGF의 버전을 의미하고, C는 주석입니다.)
  - 가장 상위의 마디는 하나의 속성을 가진 자식을 가지고 있습니다:
    B\[aa\].  (흑은 "aa"로 부호화된 위치, 1-1에서 게임을 하게 됩니다.)
    - B\[aa\] 마디는 하나의 속성을 가진 자식을 가지고 있습니다:
      W\[ab\].

수 많은 마디(자식이 하나 있는)가 포함된 SGF 파일을 상상해보면, 이러한 간단한 기록 형식이 왜 생겨났는지 짐작이 갈 것입니다.

SGF는 다양한 게임 플레이를 부호화할 수 있습니다. 바둑 플레이어는 플레이를 다시 돌아보며 되짚어가고, SGF는 다양한 플레이 시퀀스를 지원해줍니다. 예를 들어:

```
(;FF[4](;B[aa];W[ab])(;B[dd];W[ee]))
```

여기에는 두 가지 변주가 있는 뿌리 마디가 있습니다. 첫 번째(관례상 실제로 플레이 된 것을 의미)는 흑이 1-1 위에서 플레이하는 곳입니다. 흑은 뿌리 마디의 두 번째 자식 안의 더 합리적인 플레이 위치로 선생님에 의해 이동됩니다: `B[dd]` (4-4, 구석을 차지하기 위한 표준적인 시작점).

key는 여러 개의 value를 관련해서 가질 수 있습니다. 예를 들어:

```
(;FF[4];AB[aa][ab][ba])
```

여기서 `AB`(Add Black)은 세 개의 흑 돌을 바둑판 위에 추가하기 위해 사용되었습니다.

SGF와 일반적인 해석에는 대부분 무시해도 되는 더 복잡한 특징들이 있습니다. 입력값은 UTF-8로 부호화 되어있다는 것을 가정해야 하지만, 이 문제에서는 문자의 속성에 대한 부분을 포함하지 않으니 걱정하지 않아도 됩니다. 추가적으로 모든 줄 바꾸기가 unix 형태 (\n 사용, \r, \r\n은 사용 안함)를 따른다는 가정을 해야 하고, 속성과 마디 사이에 추가 여백이 없어야 한다는 가정도 해야 합니다.

이 문제에서는 SGF 문자열을 분석해 나무형 구조를 결과로 도출해야 합니다. 속성들의 데이터 형식에 대한 지식을 부호화할 필요는 없고, 모든 곳에서 사용하는
[text](http://www.red-bean.com/sgf/sgf4.html#text) 형식의 규칙을 사용하기만 하면 됩니다.
